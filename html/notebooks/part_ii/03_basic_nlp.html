
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QDXYHY09XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QDXYHY09XJ');
</script>
    
    
    <title>Processing texts using spaCy</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Customising the spaCy pipeline" href="04_basic_nlp_continued.html" />
    <link rel="prev" title="Manipulating text at scale" href="02_basic_text_processing_continued.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../about.html">
   About this Website
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../getting_started.html">
   Getting Started
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notebook_login.html">
     Log in to CSC Notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../launch_server.html">
     Launch JupyterLab on your personal server
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../jupyter.html">
     Interact with the server in JupyterLab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../github_pull.html">
     Retrieve learning materials and exercises from GitHub
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../github_push.html">
     Return completed exercises to GitHub for grading
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../python_intro.html">
   Part I: A Minimal Introduction to Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../part_i/01_working_with_jupyter_notebooks.html">
     The elements of a Jupyter Notebook
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../part_i/02_getting_started_with_python.html">
     Getting started with Python
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../../working_with_text.html">
   Part II: Working with Text in Python
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="01_basic_text_processing.html">
     Manipulating text using Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="02_basic_text_processing_continued.html">
     Manipulating text at scale
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Processing texts using spaCy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_basic_nlp_continued.html">
     Customising the spaCy pipeline
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="05_evaluating_nlp.html">
     Evaluating language models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="06_managing_data.html">
     Managing textual data using pandas
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../nlp_for_linguists.html">
   Part III: Natural Language Processing for Linguists
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../part_iii/01_multilingual_nlp.html">
     Processing diverse languages
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../part_iii/02_universal_dependencies.html">
     Universal Dependencies
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../part_iii/03_pattern_matching.html">
     Finding linguistic patterns using spaCy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../part_iii/04_embeddings.html">
     Introducing word embeddings
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../part_iii/05_embeddings_continued.html">
     Word embeddings in spaCy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../part_iii/06_text_linguistics.html">
     Working with discourse-level annotations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../citation.html">
   Citation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../resources.html">
   Resources
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/notebooks/part_ii/03_basic_nlp.ipynb.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/Applied-Language-Technology/website"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/Applied-Language-Technology/website/binder?urlpath=lab/tree/notebooks/part_ii/03_basic_nlp.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-started">
   Getting started
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-a-language-model">
     What is a language model?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-are-language-models-trained">
     How are language models trained?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#performing-basic-nlp-tasks-using-spacy">
   Performing basic NLP tasks using spaCy
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tokenization">
     Tokenization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#part-of-speech-tagging">
     Part-of-speech tagging
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#morphological-analysis">
     Morphological analysis
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#syntactic-parsing">
     Syntactic parsing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sentence-segmentation">
     Sentence segmentation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lemmatization">
     Lemmatization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#named-entity-recognition-ner">
     Named entity recognition (NER)
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="processing-texts-using-spacy">
<h1>Processing texts using spaCy<a class="headerlink" href="#processing-texts-using-spacy" title="Permalink to this headline">¶</a></h1>
<p>This section introduces you to basic tasks in natural language processing and how they can be performed using a Python library named spaCy.</p>
<p>After reading this section, you should:</p>
<ul class="simple">
<li><p>know some of the key concepts and tasks in natural language processing</p></li>
<li><p>know how to perform simple natural language processing tasks using the spaCy library</p></li>
</ul>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="600"
    height="350"
    src="https://www.youtube.com/embed/hJ6PJoITa6I"
    frameborder="0"
    allowfullscreen

></iframe>
</div></div>
</div>
<p>To get started, we import <a class="reference external" href="https://spacy.io/">spaCy</a>, one of the many libraries available for natural language processing in Python.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import the spaCy library</span>
<span class="kn">import</span> <span class="nn">spacy</span>
</pre></div>
</div>
</div>
</div>
<p>To perform natural language processing tasks for a given language, we must load a <em>language model</em> that has been trained to perform these tasks for the language in question.</p>
<p>spaCy supports <a class="reference external" href="https://spacy.io/usage/models#languages">many languages</a>, but provides pre-trained <a class="reference external" href="https://spacy.io/models/">language models</a> for fewer languages.</p>
<p>These language models come in different sizes and flavours. We will explore these models and their differences later.</p>
<p>To get acquainted with basic tasks in natural language processing, we will start with a small language model for the English language.</p>
<p>Language models are loaded using spaCy’s <code class="docutils literal notranslate"><span class="pre">load()</span></code> function, which takes the name of the model as input.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the small language model for English and assign it to the variable &#39;nlp&#39;</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;en_core_web_sm&#39;</span><span class="p">)</span>

<span class="c1"># Call the variable to examine the object</span>
<span class="n">nlp</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;spacy.lang.en.English at 0x10fa52790&gt;
</pre></div>
</div>
</div>
</div>
<p>Calling the variable <code class="docutils literal notranslate"><span class="pre">nlp</span></code> returns a spaCy <a class="reference external" href="https://spacy.io/api/language"><em>Language</em></a> object that contains a language model for the English language.</p>
<p>Esentially, spaCy’s <em>Language</em> object is a pipeline that uses the language model to perform a number of natural language processing tasks. We will return to these tasks shortly below.</p>
<div class="section" id="what-is-a-language-model">
<h3>What is a language model?<a class="headerlink" href="#what-is-a-language-model" title="Permalink to this headline">¶</a></h3>
<p>Most modern language models are based on <em>statistics</em> instead of human-defined rules.</p>
<p>Statistical language models are based on probabilities, e.g.:</p>
<ul class="simple">
<li><p>What is the probability of a given sentence occurring in a language?</p></li>
<li><p>How likely is a given word to occur in a sequence of words?</p></li>
</ul>
<p>Consider the following sentences from the news articles from the previous sections:</p>
<blockquote>
<div><p>From financial exchanges in <code class="docutils literal notranslate"><span class="pre">HIDDEN</span></code> Manhattan to cloakrooms in Washington and homeless shelters in California, unfamiliar rituals were the order of the day.</p>
</div></blockquote>
<blockquote>
<div><p>Security precautions were being taken around the <code class="docutils literal notranslate"><span class="pre">HIDDEN</span></code> as the deadline for Iraq to withdraw from Kuwait neared.</p>
</div></blockquote>
<p>You can probably make informed guesses on the <code class="docutils literal notranslate"><span class="pre">HIDDEN</span></code> words based on your knowledge of the English language and the world in general.</p>
<p>Similarly, creating a statistical language model involves observing the occurrence of words in large corpora and calculating their probabilities of occurrence in a given context. The language model can then be trained by making predictions and adjusting the model based on the errors made during prediction.</p>
</div>
<div class="section" id="how-are-language-models-trained">
<h3>How are language models trained?<a class="headerlink" href="#how-are-language-models-trained" title="Permalink to this headline">¶</a></h3>
<p>The small language model for English, for instance, is trained on a corpus called <a class="reference external" href="https://catalog.ldc.upenn.edu/LDC2013T19">OntoNotes 5.0</a>, which features texts from different <em>genres</em> such as newswire text, broadcast news, broadcast and telephone conversations and blogs.</p>
<p>This allows the corpus to cover linguistic variation in both written and spoken English.</p>
<p>The OntoNotes 5.0 corpus consists of more than just <em>plain text</em>: the annotations include <em>part-of-speech tags</em>, <em>syntactic dependencies</em> and <em>co-references</em> between words.</p>
<p>This allows modelling not just the occurrence of particular words or their sequences, but their grammatical features as well.</p>
</div>
</div>
<div class="section" id="performing-basic-nlp-tasks-using-spacy">
<h2>Performing basic NLP tasks using spaCy<a class="headerlink" href="#performing-basic-nlp-tasks-using-spacy" title="Permalink to this headline">¶</a></h2>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="600"
    height="350"
    src="https://www.youtube.com/embed/kJjKJ6qlQmM"
    frameborder="0"
    allowfullscreen

></iframe>
</div></div>
</div>
<p>To process text using the <em>Language</em> object containing the language model for English, we simply call the <em>Language</em> object <code class="docutils literal notranslate"><span class="pre">nlp</span></code> on some text.</p>
<p>Let’s begin by defining a simple test sentence, a Python string object that is stored under the variable <code class="docutils literal notranslate"><span class="pre">text</span></code>.</p>
<p>As usual, we can print out the contents by calling the variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assign an example sentence to the variable &#39;text&#39;</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;The Federal Bureau of Investigation has been ordered to track down as many as 3,000 Iraqis in this country whose visas have expired, the Justice Department said yesterday.&quot;</span>

<span class="c1"># Call the variable to examine the output</span>
<span class="n">text</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;The Federal Bureau of Investigation has been ordered to track down as many as 3,000 Iraqis in this country whose visas have expired, the Justice Department said yesterday.&#39;
</pre></div>
</div>
</div>
</div>
<p>Passing the variable <code class="docutils literal notranslate"><span class="pre">text</span></code> to the <em>Language</em> object <code class="docutils literal notranslate"><span class="pre">nlp</span></code> returns a spaCy <em>Doc</em> object, short for document.</p>
<p>In natural language processing, longer pieces of text are commonly referred to as documents, although in this case our document consists of a single sentence.</p>
<p>This object contains both the input text stored under <code class="docutils literal notranslate"><span class="pre">text</span></code> and the results of natural language processing using spaCy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Feed the string object under &#39;text&#39; to the Language object under &#39;nlp&#39;</span>
<span class="c1"># Store the result under the variable &#39;doc&#39;</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The <em>Doc</em> object is now stored under the variable <code class="docutils literal notranslate"><span class="pre">doc</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Call the variable to examine the object</span>
<span class="n">doc</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The Federal Bureau of Investigation has been ordered to track down as many as 3,000 Iraqis in this country whose visas have expired, the Justice Department said yesterday.
</pre></div>
</div>
</div>
</div>
<p>Calling the variable <code class="docutils literal notranslate"><span class="pre">doc</span></code> returns the contents of the object.</p>
<p>Although the output resembles that of a Python string, the <em>Doc</em> object contains a wealth of information about its linguistic structure, which spaCy generated by passing the text through the NLP pipeline.</p>
<p>We will now examine the tasks that were performed under the hood after we provided the input sentence to the language model.</p>
<div class="section" id="tokenization">
<h3>Tokenization<a class="headerlink" href="#tokenization" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="600"
    height="350"
    src="https://www.youtube.com/embed/hVOSVlWnl_k"
    frameborder="0"
    allowfullscreen

></iframe>
</div></div>
</div>
<p>What takes place first is a task known as <em>tokenization</em>, which breaks the text down into analytical units in need of further processing.</p>
<p>In most cases, a <em>token</em> corresponds to words separated by whitespace, but punctuation marks are also considered as independent tokens. Because computers treat words as sequences of characters, assigning punctuation marks to their own tokens prevents trailing punctuation from attaching to the words that precede them.</p>
<p>The diagram below the outlines the tasks that spaCy can perform after a text has been tokenised, such as <em>part-of-speech tagging</em>, <em>syntactic parsing</em> and <em>named entity recognition</em>.</p>
<p><img alt="The spaCy pipeline from https://spacy.io/usage/linguistic-features#section-tokenization" src="../../_images/spacy_pipeline.png" /></p>
<p>A spaCy <em>Doc</em> object is consists of a sequence of <em>Token</em> objects, which store the results of various natural language processing tasks.</p>
<p>Let’s print out each <em>Token</em> object stored in the <em>Doc</em> object <code class="docutils literal notranslate"><span class="pre">doc</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loop over items in the Doc object, using the variable &#39;token&#39; to refer to items in the list</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>  
    
    <span class="c1"># Print each token</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>  
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The
Federal
Bureau
of
Investigation
has
been
ordered
to
track
down
as
many
as
3,000
Iraqis
in
this
country
whose
visas
have
expired
,
the
Justice
Department
said
yesterday
.
</pre></div>
</div>
</div>
</div>
<p>The output shows one <em>Token</em> per line. As expected, punctuation marks such as ‘.’ and ‘,’ constitute their own <em>Tokens</em>.</p>
</div>
<div class="section" id="part-of-speech-tagging">
<h3>Part-of-speech tagging<a class="headerlink" href="#part-of-speech-tagging" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="600"
    height="350"
    src="https://www.youtube.com/embed/F2bLdmzc2X4"
    frameborder="0"
    allowfullscreen

></iframe>
</div></div>
</div>
<p>Part-of-speech (POS) tagging is the task of determining the word class of a token. This is crucial for <em>disambiguation</em>, because different parts of speech may have similar forms.</p>
<p>Consider the example: <em>The sailor dogs the hatch</em>.</p>
<p>The present tense of the verb <em>dog</em> (to fasten something with something) is precisely the same as the plural form of the noun <em>dog</em>: <em>dogs</em>.</p>
<p>To identify the correct word class, we must examine the context in which the word appears.</p>
<p><em>spaCy</em> provides two types of part-of-speech tags, <em>coarse</em> and <em>fine-grained</em>, which are stored under the attributes <code class="docutils literal notranslate"><span class="pre">pos_</span></code> and <code class="docutils literal notranslate"><span class="pre">tag_</span></code>, respectively.</p>
<p>We can access the attributes of a Python object by inserting the <em>attribute</em> after the <em>object</em> and separating them with a full stop, e.g. <code class="docutils literal notranslate"><span class="pre">token.pos_</span></code>.</p>
<p>To access the results of POS tagging, let’s loop over the <em>Doc</em> object <code class="docutils literal notranslate"><span class="pre">doc</span></code> and print each <em>Token</em> and its coarse and fine-grained part-of-speech tags.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loop over items in the Doc object, using the variable &#39;token&#39; to refer to items in the list</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
    
    <span class="c1"># Print the token and the POS tags</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">tag_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The DET DT
Federal PROPN NNP
Bureau PROPN NNP
of ADP IN
Investigation PROPN NNP
has AUX VBZ
been AUX VBN
ordered VERB VBN
to PART TO
track VERB VB
down ADP RP
as ADV RB
many ADJ JJ
as ADP IN
3,000 NUM CD
Iraqis PROPN NNPS
in ADP IN
this DET DT
country NOUN NN
whose DET WP$
visas NOUN NNS
have AUX VBP
expired VERB VBN
, PUNCT ,
the DET DT
Justice PROPN NNP
Department PROPN NNP
said VERB VBD
yesterday NOUN NN
. PUNCT .
</pre></div>
</div>
</div>
</div>
<p>The coarse part-of-speech tags available under the <code class="docutils literal notranslate"><span class="pre">pos_</span></code> attribute are based on the <a class="reference external" href="https://universaldependencies.org/u/pos/all.html">Universal Dependencies</a> tag set.</p>
<p>The fine-grained part-of-speech tags under <code class="docutils literal notranslate"><span class="pre">tag_</span></code>, in turn, are based on the OntoNotes 5.0 corpus introduced above.</p>
<p>In contrast to coarse part-of-speech tags, the fine-grained tags also encode <a class="reference external" href="https://spacy.io/api/annotation#pos-en">grammatical information</a>. The tags for verbs, for example, are distinguished by aspect and tense.</p>
</div>
<div class="section" id="morphological-analysis">
<h3>Morphological analysis<a class="headerlink" href="#morphological-analysis" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="600"
    height="350"
    src="https://www.youtube.com/embed/1iliKkbHF30"
    frameborder="0"
    allowfullscreen

></iframe>
</div></div>
</div>
<p>Morphemes constitute the smallest grammatical units that carry meaning. Two types of morphemes are generally recognised: <em>free</em> morphemes, which consist of words that can stand on their own, and <em>bound</em> morphemes, which inflect other morphemes. For the English language, bound morphemes include suffixes such as <em>-s</em>, which is used to indicate the plural form of a noun.</p>
<p>Put differently, morphemes shape the external <em>form</em> of a word, and these forms are associated with given grammatical <em>functions</em>.</p>
<p>spaCy performs morphological analysis automatically and stores the result under the attribute <code class="docutils literal notranslate"><span class="pre">morph</span></code> of a <em>Token</em> object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loop over items in the Doc object, using the variable &#39;token&#39; to refer to items in the list</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>

    <span class="c1"># Print the token and the results of morphological analysis</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">morph</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The Definite=Def|PronType=Art
Federal Number=Sing
Bureau Number=Sing
of 
Investigation Number=Sing
has Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin
been Tense=Past|VerbForm=Part
ordered Aspect=Perf|Tense=Past|VerbForm=Part
to 
track VerbForm=Inf
down 
as 
many Degree=Pos
as 
3,000 NumType=Card
Iraqis Number=Plur
in 
this Number=Sing|PronType=Dem
country Number=Sing
whose Poss=Yes
visas Number=Plur
have Mood=Ind|Tense=Pres|VerbForm=Fin
expired Aspect=Perf|Tense=Past|VerbForm=Part
, PunctType=Comm
the Definite=Def|PronType=Art
Justice Number=Sing
Department Number=Sing
said Tense=Past|VerbForm=Fin
yesterday Number=Sing
. PunctType=Peri
</pre></div>
</div>
</div>
</div>
<p>As the output shows, all <em>Tokens</em> do not have morphological information, because they consist of free morphemes.</p>
<p>To retrieve morphological information from a <em>Token</em> object, we must use the <code class="docutils literal notranslate"><span class="pre">get()</span></code> method of the <code class="docutils literal notranslate"><span class="pre">morph</span></code> attribute.</p>
<p>We can use the brackets <code class="docutils literal notranslate"><span class="pre">[]</span></code> to access items in the <em>Doc</em> object.</p>
<p>The following line retrieves morphological information about aspect for the 22nd <em>Token</em> in the <em>Doc</em> object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve morphological information on aspect for 22nd item in the Doc object</span>
<span class="n">doc</span><span class="p">[</span><span class="mi">22</span><span class="p">]</span><span class="o">.</span><span class="n">morph</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Aspect&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Perf&#39;]
</pre></div>
</div>
</div>
</div>
<p>This returns a list with a single string item <em>Perf</em>, which refers to the perfective aspect.</p>
<p>What if we attempt to retrieve a morphological feature that a <em>Token</em> does not have?</p>
<p>Let’s attempt to retrieve information on aspect for the 21st <em>Token</em> in the <em>Doc</em> object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve morphological information on aspect for 21st Token in the Doc object</span>
<span class="n">doc</span><span class="p">[</span><span class="mi">21</span><span class="p">]</span><span class="o">.</span><span class="n">morph</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Aspect&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<p>This returns an empty list, as indicated by the brackets <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code> with nothing between them.</p>
<p>To retrieve all the morphological information available for a given <em>Token</em>, the best solution is to use the <code class="docutils literal notranslate"><span class="pre">to_dict()</span></code> method of the <code class="docutils literal notranslate"><span class="pre">morph</span></code> attribute.</p>
<p>This returns a dictionary, a Python data structure consisting of <em>key</em> and <em>value</em> pairs.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve morphological information for 21st Token in the Doc object</span>
<span class="c1"># Use the to_dict() method to cast the result into a dictionary</span>
<span class="n">doc</span><span class="p">[</span><span class="mi">21</span><span class="p">]</span><span class="o">.</span><span class="n">morph</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;Mood&#39;: &#39;Ind&#39;, &#39;Tense&#39;: &#39;Pres&#39;, &#39;VerbForm&#39;: &#39;Fin&#39;}
</pre></div>
</div>
</div>
</div>
<p>A Python dictionary is marked by curly brackets <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">}</span></code>. Each key/value pair is separated by a colon <code class="docutils literal notranslate"><span class="pre">:</span></code>. In this case, both keys and values consist of string objects.</p>
<p>The value stored under a key may be accessed by placing the key name in brackets <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code> and placing this right after the name of the dictionary, as shown below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assign morphological information to the dictionary &#39;morph_dict&#39; </span>
<span class="n">morph_dict</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="mi">21</span><span class="p">]</span><span class="o">.</span><span class="n">morph</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

<span class="c1"># Get the value corresponding to the key &#39;Mood&#39;</span>
<span class="n">morph_dict</span><span class="p">[</span><span class="s1">&#39;Mood&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Ind&#39;
</pre></div>
</div>
</div>
</div>
<p>Dictionaries are a powerful data structure in Python, which we will frequently use for storing information.</p>
</div>
<div class="section" id="syntactic-parsing">
<h3>Syntactic parsing<a class="headerlink" href="#syntactic-parsing" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="600"
    height="350"
    src="https://www.youtube.com/embed/2TBNpxAbh_g"
    frameborder="0"
    allowfullscreen

></iframe>
</div></div>
</div>
<p>Syntactic parsing (or <em>dependency parsing</em>) is the task of defining syntactic dependencies that hold between tokens.</p>
<p>The syntactic dependencies are available under the <code class="docutils literal notranslate"><span class="pre">dep_</span></code> attribute of a <em>Token</em> object.</p>
<p>Let’s print out the syntactic dependencies for each <em>Token</em> in the <em>Doc</em> object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loop over items in the Doc object, using the variable &#39;token&#39; to refer to items in the list</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
    
    <span class="c1"># Print the token and its dependency tag</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">dep_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The det
Federal compound
Bureau nsubjpass
of prep
Investigation pobj
has aux
been auxpass
ordered ccomp
to aux
track xcomp
down prt
as advmod
many amod
as quantmod
3,000 nummod
Iraqis dobj
in prep
this det
country pobj
whose poss
visas nsubj
have aux
expired relcl
, punct
the det
Justice compound
Department nsubj
said ROOT
yesterday npadvmod
. punct
</pre></div>
</div>
</div>
</div>
<p>Unlike part-of-speech tags that are associated with a single <em>Token</em>, dependency tags indicate a relation that holds between two <em>Tokens</em>.</p>
<p>To better understand the syntactic relations captured by dependency parsing, let’s use some of the additional attributes available for each <em>Token</em>:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code>: the position of the <em>Token</em> in the <em>Doc</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">token</span></code>: the <em>Token</em> itself</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dep_</span></code>: a tag for the syntactic relation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">head</span></code> and <code class="docutils literal notranslate"><span class="pre">i</span></code>: the <em>Token</em> that governs the current <em>Token</em> and its index</p></li>
</ol>
<p>This illustrates how Python attributes can be used in a flexible manner: the attribute <code class="docutils literal notranslate"><span class="pre">head</span></code> points to another <em>Token</em>, which naturally has the attribute <code class="docutils literal notranslate"><span class="pre">i</span></code> that contains its index or position in the <em>Doc</em>. We can combine these two attributes to retrieve this information for any token by referring to <code class="docutils literal notranslate"><span class="pre">.head.i</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loop over items in the Doc object, using the variable &#39;token&#39; to refer to items in the list</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
    
    <span class="c1"># Print the index of current token, the token itself, the dependency, the head and its index</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">i</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">dep_</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">i</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">head</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0 The det 2 Bureau
1 Federal compound 2 Bureau
2 Bureau nsubjpass 7 ordered
3 of prep 2 Bureau
4 Investigation pobj 3 of
5 has aux 7 ordered
6 been auxpass 7 ordered
7 ordered ccomp 27 said
8 to aux 9 track
9 track xcomp 7 ordered
10 down prt 9 track
11 as advmod 14 3,000
12 many amod 14 3,000
13 as quantmod 14 3,000
14 3,000 nummod 15 Iraqis
15 Iraqis dobj 9 track
16 in prep 15 Iraqis
17 this det 18 country
18 country pobj 16 in
19 whose poss 20 visas
20 visas nsubj 22 expired
21 have aux 22 expired
22 expired relcl 18 country
23 , punct 27 said
24 the det 26 Department
25 Justice compound 26 Department
26 Department nsubj 27 said
27 said ROOT 27 said
28 yesterday npadvmod 27 said
29 . punct 27 said
</pre></div>
</div>
</div>
</div>
<p>Although the output above helps to clarify the syntactic dependencies between tokens, they are generally much easier to perceive using diagrams.</p>
<p>spaCy provides a <a class="reference external" href="https://spacy.io/usage/visualizers">visualisation tool</a> for visualising dependencies. This component of the spaCy library, <em>displacy</em>, can be imported using the following command.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">spacy</span> <span class="kn">import</span> <span class="n">displacy</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">displacy</span></code> module has a function named <code class="docutils literal notranslate"><span class="pre">render()</span></code>, which takes a <em>Doc</em> object as input.</p>
<p>To draw a dependency tree, we provide the <em>Doc</em> object <code class="docutils literal notranslate"><span class="pre">doc</span></code> to the <code class="docutils literal notranslate"><span class="pre">render()</span></code> function with two arguments:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">style</span></code>: The value <code class="docutils literal notranslate"><span class="pre">dep</span></code> instructs <em>displacy</em> to draw a visualisation for syntactic dependencies.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: This argument takes a Python dictionary as input. We provide a dictionary with the key <code class="docutils literal notranslate"><span class="pre">compact</span></code> and Boolean value <code class="docutils literal notranslate"><span class="pre">True</span></code> to instruct <em>displacy</em> to draw a compact tree diagram. Additional options for formatting the visualisation can be found in spaCy <a class="reference external" href="https://spacy.io/api/top-level#displacy_options">documentation</a>.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">displacy</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;dep&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;compact&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span class="tex2jax_ignore"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en" id="489e22311e1a465f9a346f26544a11de-0" class="displacy" width="4250" height="662.0" direction="ltr" style="max-width: none; height: 662.0px; color: #000000; background: #ffffff; font-family: Arial; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="50">The</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">DET</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="200">Federal</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="200">PROPN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="350">Bureau</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="350">PROPN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="500">of</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="500">ADP</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="650">Investigation</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="650">PROPN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="800">has</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="800">AUX</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="950">been</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="950">AUX</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="1100">ordered</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1100">VERB</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="1250">to</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1250">PART</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="1400">track</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1400">VERB</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="1550">down</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1550">ADP</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="1700">as</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1700">ADV</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="1850">many</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="1850">ADJ</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="2000">as</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2000">ADP</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="2150">3,000</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2150">NUM</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="2300">Iraqis</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2300">PROPN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="2450">in</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2450">ADP</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="2600">this</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2600">DET</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="2750">country</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2750">NOUN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="2900">whose</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="2900">DET</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="3050">visas</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3050">NOUN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="3200">have</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3200">AUX</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="3350">expired,</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3350">VERB</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="3500">the</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3500">DET</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="3650">Justice</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3650">PROPN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="3800">Department</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3800">PROPN</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="3950">said</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="3950">VERB</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="572.0">
    <tspan class="displacy-word" fill="currentColor" x="4100">yesterday.</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="4100">NOUN</tspan>
</text>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-0" stroke-width="2px" d="M62,527.0 62,477.0 335.0,477.0 335.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M62,529.0 L58,521.0 66,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-1" stroke-width="2px" d="M212,527.0 212,502.0 332.0,502.0 332.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">compound</textPath>
    </text>
    <path class="displacy-arrowhead" d="M212,529.0 L208,521.0 216,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-2" stroke-width="2px" d="M362,527.0 362,402.0 1094.0,402.0 1094.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-2" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubjpass</textPath>
    </text>
    <path class="displacy-arrowhead" d="M362,529.0 L358,521.0 366,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-3" stroke-width="2px" d="M362,527.0 362,502.0 482.0,502.0 482.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-3" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M482.0,529.0 L486.0,521.0 478.0,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-4" stroke-width="2px" d="M512,527.0 512,502.0 632.0,502.0 632.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-4" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M632.0,529.0 L636.0,521.0 628.0,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-5" stroke-width="2px" d="M812,527.0 812,477.0 1085.0,477.0 1085.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-5" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">aux</textPath>
    </text>
    <path class="displacy-arrowhead" d="M812,529.0 L808,521.0 816,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-6" stroke-width="2px" d="M962,527.0 962,502.0 1082.0,502.0 1082.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-6" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">auxpass</textPath>
    </text>
    <path class="displacy-arrowhead" d="M962,529.0 L958,521.0 966,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-7" stroke-width="2px" d="M1112,527.0 1112,352.0 3950.0,352.0 3950.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-7" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">ccomp</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1112,529.0 L1108,521.0 1116,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-8" stroke-width="2px" d="M1262,527.0 1262,502.0 1382.0,502.0 1382.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-8" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">aux</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1262,529.0 L1258,521.0 1266,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-9" stroke-width="2px" d="M1112,527.0 1112,477.0 1385.0,477.0 1385.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-9" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">xcomp</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1385.0,529.0 L1389.0,521.0 1381.0,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-10" stroke-width="2px" d="M1412,527.0 1412,502.0 1532.0,502.0 1532.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-10" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prt</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1532.0,529.0 L1536.0,521.0 1528.0,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-11" stroke-width="2px" d="M1712,527.0 1712,452.0 2138.0,452.0 2138.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-11" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">advmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1712,529.0 L1708,521.0 1716,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-12" stroke-width="2px" d="M1862,527.0 1862,477.0 2135.0,477.0 2135.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-12" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">amod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M1862,529.0 L1858,521.0 1866,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-13" stroke-width="2px" d="M2012,527.0 2012,502.0 2132.0,502.0 2132.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-13" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">quantmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2012,529.0 L2008,521.0 2016,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-14" stroke-width="2px" d="M2162,527.0 2162,502.0 2282.0,502.0 2282.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-14" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nummod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2162,529.0 L2158,521.0 2166,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-15" stroke-width="2px" d="M1412,527.0 1412,377.0 2297.0,377.0 2297.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-15" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">dobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2297.0,529.0 L2301.0,521.0 2293.0,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-16" stroke-width="2px" d="M2312,527.0 2312,502.0 2432.0,502.0 2432.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-16" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">prep</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2432.0,529.0 L2436.0,521.0 2428.0,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-17" stroke-width="2px" d="M2612,527.0 2612,502.0 2732.0,502.0 2732.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-17" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2612,529.0 L2608,521.0 2616,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-18" stroke-width="2px" d="M2462,527.0 2462,477.0 2735.0,477.0 2735.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-18" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">pobj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2735.0,529.0 L2739.0,521.0 2731.0,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-19" stroke-width="2px" d="M2912,527.0 2912,502.0 3032.0,502.0 3032.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-19" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">poss</textPath>
    </text>
    <path class="displacy-arrowhead" d="M2912,529.0 L2908,521.0 2916,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-20" stroke-width="2px" d="M3062,527.0 3062,477.0 3335.0,477.0 3335.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-20" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3062,529.0 L3058,521.0 3066,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-21" stroke-width="2px" d="M3212,527.0 3212,502.0 3332.0,502.0 3332.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-21" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">aux</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3212,529.0 L3208,521.0 3216,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-22" stroke-width="2px" d="M2762,527.0 2762,427.0 3341.0,427.0 3341.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-22" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">relcl</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3341.0,529.0 L3345.0,521.0 3337.0,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-23" stroke-width="2px" d="M3512,527.0 3512,477.0 3785.0,477.0 3785.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-23" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">det</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3512,529.0 L3508,521.0 3516,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-24" stroke-width="2px" d="M3662,527.0 3662,502.0 3782.0,502.0 3782.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-24" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">compound</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3662,529.0 L3658,521.0 3666,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-25" stroke-width="2px" d="M3812,527.0 3812,502.0 3932.0,502.0 3932.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-25" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">nsubj</textPath>
    </text>
    <path class="displacy-arrowhead" d="M3812,529.0 L3808,521.0 3816,521.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-489e22311e1a465f9a346f26544a11de-0-26" stroke-width="2px" d="M3962,527.0 3962,502.0 4082.0,502.0 4082.0,527.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-489e22311e1a465f9a346f26544a11de-0-26" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">npadvmod</textPath>
    </text>
    <path class="displacy-arrowhead" d="M4082.0,529.0 L4086.0,521.0 4078.0,521.0" fill="currentColor"/>
</g>
</svg></span></div></div>
</div>
<p>The syntactic dependencies are visualised using lines that lead from the <strong>head</strong> <em>Token</em> to the <em>Token</em> governed by that head.</p>
<p>The dependency tags are based on <a class="reference external" href="https://universaldependencies.org/">Universal Dependencies</a>, a framework for describing morphological and syntactic features across languages (for a theoretical discussion of Universal Dependencies, see de Marneffe et al. <a class="reference external" href="https://doi.org/10.1162/coli_a_00402">2021</a>).</p>
<p>If you don’t know what a particular tag means, spaCy provides a function for explaining the tags, <code class="docutils literal notranslate"><span class="pre">explain()</span></code>, which takes a tag as input (note that the tags are case-sensitive).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">spacy</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="s1">&#39;pobj&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;object of preposition&#39;
</pre></div>
</div>
</div>
</div>
<p>Finally, if you wonder about the underscores <code class="docutils literal notranslate"><span class="pre">_</span></code> in the attribute names: spaCy encodes all strings by mapping them to hash values (a numerical representation) for computational efficiency.</p>
<p>Let’s print out the first Token in the Doc <code class="docutils literal notranslate"><span class="pre">[0]</span></code> and its dependencies to examine how this works.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">doc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dep</span><span class="p">,</span> <span class="n">doc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dep_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The 415 det
</pre></div>
</div>
</div>
</div>
<p>As you can see, the hash value 415 is reserved for the tag corresponding to a determiner (<code class="docutils literal notranslate"><span class="pre">det</span></code>).</p>
<p>If you want human-readable output for dependency parsing and spaCy returns sequences of numbers, then you most likely forgot to add the underscore to the attribute name.</p>
</div>
<div class="section" id="sentence-segmentation">
<h3>Sentence segmentation<a class="headerlink" href="#sentence-segmentation" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="600"
    height="350"
    src="https://www.youtube.com/embed/NknDZSRBT7Y"
    frameborder="0"
    allowfullscreen

></iframe>
</div></div>
</div>
<p>spaCy also segments <em>Doc</em> objects into sentences. This task is known as <a class="reference external" href="https://spacy.io/usage/linguistic-features#section-sbd"><em>sentence segmentation</em></a>.</p>
<p>Sentence segmentation imposes additional structure to larger texts. By determining the boundaries of a sentence, we can constrain tasks such as dependency parsing to individual sentences.</p>
<p>spaCy provides access to the results of sentence segmentation via the attribute <code class="docutils literal notranslate"><span class="pre">sents</span></code> of a <em>Doc</em> object.</p>
<p>Let’s loop over the sentences contained in the <em>Doc</em> object <code class="docutils literal notranslate"><span class="pre">doc</span></code> and count them using Python’s <code class="docutils literal notranslate"><span class="pre">enumerate()</span></code> function.</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">enumerate()</span></code> function returns a count that increases with each item in the loop.</p>
<p>We assign this count to the variable <code class="docutils literal notranslate"><span class="pre">number</span></code>, whereas each sentence is stored under <code class="docutils literal notranslate"><span class="pre">sent</span></code>. We then print out both at the same time using the <code class="docutils literal notranslate"><span class="pre">print()</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loop over sentences in the Doc object and count them using enumerate()</span>
<span class="k">for</span> <span class="n">number</span><span class="p">,</span> <span class="n">sent</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">sents</span><span class="p">):</span>
    
    <span class="c1"># Print the token and its dependency tag</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">sent</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0 The Federal Bureau of Investigation has been ordered to track down as many as 3,000 Iraqis in this country whose visas have expired, the Justice Department said yesterday.
</pre></div>
</div>
</div>
</div>
<p>This only returns a single sentence, but the <em>Doc</em> object could easily hold a longer text with multiple sentences, such as an entire newspaper article.</p>
</div>
<div class="section" id="lemmatization">
<h3>Lemmatization<a class="headerlink" href="#lemmatization" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="600"
    height="350"
    src="https://www.youtube.com/embed/pvMImQEUlN4"
    frameborder="0"
    allowfullscreen

></iframe>
</div></div>
</div>
<p>A lemma is the base form of a word. Keep in mind that unless explicitly instructed, computers cannot tell the difference between singular and plural forms of words, but treat them as distinct tokens, because their forms differ.</p>
<p>If one wants to count the occurrences of words, for instance, a process known as <em>lemmatization</em> is needed to group together the different forms of the same token.</p>
<p>Lemmas are available for each <em>Token</em> under the attribute <code class="docutils literal notranslate"><span class="pre">lemma_</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loop over items in the Doc object, using the variable &#39;token&#39; to refer to items in the list</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
    
    <span class="c1"># Print the token and its dependency tag</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">lemma_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The the
Federal Federal
Bureau Bureau
of of
Investigation Investigation
has have
been be
ordered order
to to
track track
down down
as as
many many
as as
3,000 3,000
Iraqis Iraqis
in in
this this
country country
whose whose
visas visa
have have
expired expire
, ,
the the
Justice Justice
Department Department
said say
yesterday yesterday
. .
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="named-entity-recognition-ner">
<h3>Named entity recognition (NER)<a class="headerlink" href="#named-entity-recognition-ner" title="Permalink to this headline">¶</a></h3>
<p>Named entity recognition (NER) is the task of recognising and classifying entities named in a text.</p>
<p>spaCy can recognise the <a class="reference external" href="https://spacy.io/api/annotation#named-entities">named entities annotated in the OntoNotes 5 corpus</a>, such as persons, geographic locations and products, to name but a few examples.</p>
<p>Instead of looping over <em>Tokens</em> in the <em>Doc</em> object, we can use the <em>Doc</em> object’s <code class="docutils literal notranslate"><span class="pre">.ents</span></code> attribute to get the entities.</p>
<p>This returns a <em>Span</em> object, which is a sequence of <em>Tokens</em>, as many named entities span multiple <em>Tokens</em>.</p>
<p>The named entities and their types are stored under the attributes <code class="docutils literal notranslate"><span class="pre">.text</span></code> and <code class="docutils literal notranslate"><span class="pre">.label_</span></code>.</p>
<p>Let’s print out the named entities in the <em>Doc</em> object <code class="docutils literal notranslate"><span class="pre">doc</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loop over the named entities in the Doc object </span>
<span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">ents</span><span class="p">:</span>

    <span class="c1"># Print the named entity and its label</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ent</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">ent</span><span class="o">.</span><span class="n">label_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The Federal Bureau of Investigation ORG
as many as 3,000 CARDINAL
Iraqis NORP
the Justice Department ORG
yesterday DATE
</pre></div>
</div>
</div>
</div>
<p>The majority of named entities identified in the <em>Doc</em> consist of multiple <em>Tokens</em>, which is why they are represented as <em>Span</em> objects.</p>
<p>We can verify this by accessing the first named entity under <code class="docutils literal notranslate"><span class="pre">doc.ents</span></code>, which can be found at position <code class="docutils literal notranslate"><span class="pre">0</span></code>, because Python starts counting from zero, and feeding this object to Python’s <code class="docutils literal notranslate"><span class="pre">type()</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check the type of the object used to store named entities</span>
<span class="nb">type</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">ents</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>spacy.tokens.span.Span
</pre></div>
</div>
</div>
</div>
<p>spaCy <a class="reference external" href="https://spacy.io/api/span"><em>Span</em></a> objects contain several useful arguments.</p>
<p>Most importantly, the attributes <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> return the indices of <em>Tokens</em>, which determine where the <em>Span</em> starts and ends.</p>
<p>We can examine this in greater detail by printing out the <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> attributes for the first named entity in the document.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print the named entity and indices of its start and end Tokens</span>
<span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">ents</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">doc</span><span class="o">.</span><span class="n">ents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">doc</span><span class="o">.</span><span class="n">ents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The Federal Bureau of Investigation 0 5
</pre></div>
</div>
</div>
</div>
<p>The named entity starts at index 0 and ends at index 5.</p>
<p>If we print out the fifth <em>Token</em> in the <em>Doc</em> object, we will see that this corresponds to the Token “has”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">doc</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>has
</pre></div>
</div>
</div>
</div>
<p>This means that the index returned by the <code class="docutils literal notranslate"><span class="pre">end</span></code> argument does <strong>not</strong> correspond to the <em>last Token</em> in a <em>Span</em>, but returns the index of the <em>first Token</em> following the <em>Span</em>.</p>
<p>Put differently, the <code class="docutils literal notranslate"><span class="pre">start</span></code> means that the <em>Span</em> starts here, whereas the <code class="docutils literal notranslate"><span class="pre">end</span></code> attribute means that the <em>Span</em> has <em>ended</em> here.</p>
<p>We can also render the named entities using <em>displacy</em>, the module used for visualising dependency parses above.</p>
<p>Note that we must pass the string <code class="docutils literal notranslate"><span class="pre">ent</span></code> to the <code class="docutils literal notranslate"><span class="pre">style</span></code> argument to indicate that we wish to visualise named entities.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">displacy</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;ent&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span class="tex2jax_ignore"><div class="entities" style="line-height: 2.5; direction: ltr">
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    The Federal Bureau of Investigation
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
 has been ordered to track down 
<mark class="entity" style="background: #e4e7d2; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    as many as 3,000
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">CARDINAL</span>
</mark>

<mark class="entity" style="background: #c887fb; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Iraqis
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">NORP</span>
</mark>
 in this country whose visas have expired, 
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    the Justice Department
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
 said 
<mark class="entity" style="background: #bfe1d9; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    yesterday
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">DATE</span>
</mark>
.</div></span></div></div>
</div>
<p>If you don’t recognise a particular tag used for a named entity, you can always ask spaCy for an explanation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">spacy</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="s1">&#39;NORP&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Nationalities or religious or political groups&#39;
</pre></div>
</div>
</div>
</div>
<p>This section should have given you an idea of some basic natural language processing tasks, how they can be performed using spaCy and what kinds of linguistic annotations they produce.</p>
<p>The <a class="reference internal" href="04_basic_nlp_continued.html"><span class="doc std std-doc">following section</span></a> focuses on how to customise the tasks that spaCy performs on an input text.</p>
</div>
</div>
</div>


              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="02_basic_text_processing_continued.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Manipulating text at scale</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="04_basic_nlp_continued.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Customising the spaCy pipeline</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

   <div class="footer"><a href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0;padding:10px" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-nc.svg"/></a> © 2020– <a href="http://www.helsinki.fi/~thiippal">Tuomo Hiippala</a>
       in collaboration with <a href="https://mooc.fi/en" target="_blank">mooc.fi<img src="_static/moocfi.svg" style="border-width:0;padding:2px" width=50></a></div>
    

  </body>
</html>